(function () {
  'use strict';

  // helpers
  function showFatal(msg){ console.error(msg); const d = document.getElementById('debug-overlay'); if(d){ d.style.display='block'; d.textContent = 'Fatal: ' + msg; } else alert(msg); }
  function parseValue(v){ if(v===0) return 0; if(!v && v!==0) return 0; let s = String(v).trim(); s = s.replace(/[\$\€\£\¥\₹]/g,'').replace(/\s+/g,''); const m = s.match(/^([\d,]+(?:\.\d+)?)([kKmM])?$/); if(m){ let n = parseFloat(m[1].replace(/,/g,''))||0; const sx = m[2]; if(sx){ if(sx.toLowerCase()==='k') n *= 1e3; if(sx.toLowerCase()==='m') n *= 1e6;} return n;} const f = s.match(/[\d.]+/); return f ? parseFloat(f[0].replace(/,/g,'')) : 0; }
  function abbr(n){ if(!isFinite(n)||n===0) return '0'; if(n>=1e6) return (n/1e6).toFixed(2)+'M+'; if(n>=1e3) return (n/1e3).toFixed(2)+'K'; return Math.round(n).toLocaleString(); }
  function esc(s){ return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

  if (typeof unitDatabase === 'undefined' || !unitDatabase || typeof unitDatabase !== 'object') { showFatal('unitDatabase missing.'); return; }

  const imageProvider = "https://corsproxy.io/?https://drive.google.com/thumbnail?id=";
  const unitKeys = Object.keys(unitDatabase).sort((a,b)=> (unitDatabase[a].name||'').localeCompare(unitDatabase[b].name||''));
  const LS_KEY = 'skibidi_td_trade_v2';

  // DOM refs already defined in markup via IDs
  const listRoot = document.getElementById('list-root');
  const catButtons = Array.from(document.querySelectorAll('.cat-btn'));
  const sortBtns = Array.from(document.querySelectorAll('.sort-btn'));
  const pagination = document.getElementById('pagination');
  const pageInfo = document.getElementById('page-info');
  const prevBtn = document.getElementById('prev-btn');
  const nextBtn = document.getElementById('next-btn');

  const calculatorRoot = document.getElementById('calculator-root');
  const plusLeft = document.getElementById('plus-left');
  const plusRight = document.getElementById('plus-right');
  const leftItemsEl = document.getElementById('left-items');
  const rightItemsEl = document.getElementById('right-items');
  const leftTotalEl = document.getElementById('left-total');
  const rightTotalEl = document.getElementById('right-total');
  const verdictText = document.getElementById('verdict-text');

  const pickerOverlay = document.getElementById('picker-overlay');
  const pickerSidebar = document.getElementById('picker-sidebar');
  const pickerGrid = document.getElementById('picker-grid');
  const pickerSearch = document.getElementById('picker-search-input');

  const goMainBtn = document.getElementById('go-main-btn');

  // quantity modal refs
  const qtyOverlay = document.getElementById('qty-overlay');
  const qtyInput = document.getElementById('qty-input');
  const traitList = document.getElementById('trait-list');
  const qtyAddBtn = document.getElementById('qty-add');
  const qtyCloseBtn = document.getElementById('qty-close');

  // state
  let currentFilter = 'all';
  let searchQuery = '';
  let currentSort = 'default';
  let currentPage = 1;
  const itemsPerPage = 15;
  const rarityOrder = { astral:1, cosmic:2, godly:3, divine:4, mythic:5, legendary:6, exclusive:99 };

  // calculator arrays, restored from storage
  let leftItems = [], rightItems = [];

  // utility: rarity class
  function rarityClass(u){ return u && u.rarity ? 'rarity-' + String(u.rarity).toLowerCase().replace(/\s+/g,'-') : ''; }

  // STATUS mapping to badge class
  function statusClass(status){
    if(!status) return 'status-recovering';
    const s = String(status).toLowerCase();
    if (/rising|rise/.test(s)) return 'status-rising';
    if (/stable/.test(s)) return 'status-stable';
    if (/dropp|drop/.test(s)) return 'status-dropping';
    if (/overpaid/.test(s)) return 'status-overpaid';
    if (/underpaid/.test(s)) return 'status-underpaid';
    if (/hyped|hype/.test(s)) return 'status-hyped';
    if (/recovering/.test(s)) return 'status-recovering';
    if (/unstable/.test(s)) return 'status-unstable';
    if (/high demand|high demand/.test(s)) return 'status-high-demand';
    if (/meme/.test(s)) return 'status-meme';
    if (/insane/.test(s)) return 'status-insane';
    return 'status-recovering';
  }

  // demand color by numeric value
  function demandClass(demandStr){
    if(!demandStr) return 'demand-low';
    const m = String(demandStr).match(/(\d+)/);
    const v = m ? Number(m[1]) : 0;
    if (v >= 8) return 'demand-high';
    if (v >= 4) return 'demand-mid';
    return 'demand-low';
  }

  // Render main list
  function renderList(){
    const keys = unitKeys.filter(k => {
      const u = unitDatabase[k];
      const r = (u.rarity || '').toLowerCase();
      if (currentFilter !== 'all' && r !== currentFilter) return false;
      if (searchQuery && !(u.name||'').toLowerCase().includes(searchQuery.toLowerCase())) return false;
      return true;
    });

    keys.sort((a,b)=>{
      if (currentSort === 'value-desc') return parseValue(unitDatabase[b].baseStats.value) - parseValue(unitDatabase[a].baseStats.value);
      const wa = rarityOrder[(unitDatabase[a].rarity||'').toLowerCase()]||999;
      const wb = rarityOrder[(unitDatabase[b].rarity||'').toLowerCase()]||999;
      if (wa !== wb) return wa - wb;
      return (unitDatabase[a].name||'').localeCompare(unitDatabase[b].name||'');
    });

    const totalPages = Math.max(1, Math.ceil(keys.length / itemsPerPage));
    if (currentPage > totalPages) currentPage = totalPages;
    const startIndex = (currentPage - 1) * itemsPerPage;
    const pageKeys = keys.slice(startIndex, startIndex + itemsPerPage);

    pageInfo.innerText = `Page ${currentPage} of ${totalPages}`;
    prevBtn.disabled = currentPage === 1;
    nextBtn.disabled = currentPage === totalPages;

    // subtle background tint for chosen filter
    applyTintForFilter(currentFilter);

    listRoot.innerHTML = pageKeys.map(k => {
      const u = unitDatabase[k];
      const portrait = u.unitId ? `url('${imageProvider}${u.unitId}')` : '';
      const rcls = rarityClass(u);
      const stClass = statusClass(u.baseStats.status);
      const dmClass = demandClass(u.baseStats.demand);
      const second = u.secondEdition && String(u.secondEdition).toLowerCase() === 'yes' ? `<div style="color:var(--gold);font-weight:800;font-size:11px;margin-top:6px">2nd Edition</div>` : '';
      return `
        <div class="unit-card ${rcls}" data-unit="${k}">
          <div style="display:flex;flex-direction:column;align-items:center;gap:8px">
            <div class="unit-title">${esc(u.name)}</div>
            <div class="portrait-circle ${rcls}">
              <div class="unit-image" style="background-image:${portrait}"></div>
            </div>
            ${second}
          </div>

          <div class="data-table">
            <div class="data-cell">
              <div class="label">Value</div>
              <div class="val highlight-gold">${esc(u.baseStats.value)}</div>
            </div>
            <div class="data-cell">
              <div class="label">Status</div>
              <div class="val"><span class="status-badge ${stClass}">${esc(u.baseStats.status)}</span></div>
            </div>
            <div class="data-cell">
              <div class="label">Demand</div>
              <div class="val"><span class="demand-pill ${dmClass}">${esc(u.baseStats.demand)}</span></div>
            </div>
          </div>
        </div>`;
    }).join('');
  }

  function applyTintForFilter(filter){
    const map = {
      astral: 'linear-gradient(180deg, rgba(127,0,255,0.04), rgba(0,0,0,0))',
      cosmic: 'linear-gradient(180deg, rgba(184,0,230,0.04), rgba(0,0,0,0))',
      divine: 'linear-gradient(180deg, rgba(196,0,207,0.04), rgba(0,0,0,0))',
      godly: 'linear-gradient(180deg, rgba(123,0,230,0.04), rgba(0,0,0,0))',
      exclusive: 'linear-gradient(180deg, rgba(46,125,255,0.04), rgba(0,0,0,0))',
      mythic: 'linear-gradient(180deg, rgba(255,109,104,0.04), rgba(0,0,0,0))',
      legendary: 'linear-gradient(180deg, rgba(245,166,35,0.04), rgba(0,0,0,0))',
      all: 'transparent'
    };
    listRoot.style.background = map[(filter||'all')] || 'transparent';
  }

  // Picker: build categories (no "All"), default to Astral, clicking a thumb adds and auto-closes picker.
  function createPicker(){
    const cats = ['Astral','Cosmic','Divine','Godly','Exclusive','Mythic','Legendary'];
    pickerSidebar.innerHTML = cats.map(c => `<div class="picker-cat" data-cat="${c.toLowerCase()}">${c}</div>`).join('');
    // default active
    const defaultBtn = pickerSidebar.querySelector('[data-cat="astral"]');
    if (defaultBtn) defaultBtn.classList.add('active');
    renderPickerGrid('astral','',1,'astral','');

    // attach handlers
    pickerSidebar.querySelectorAll('.picker-cat').forEach(btn => {
      btn.addEventListener('click', () => {
        pickerSidebar.querySelectorAll('.picker-cat').forEach(x => x.classList.remove('active'));
        btn.classList.add('active');
        const cat = btn.getAttribute('data-cat') || 'astral';
        renderPickerGrid(cat,'',1,cat,pickerSearch.value || '');
      });
    });

    pickerSearch.removeEventListener('input', onPickerSearch);
    pickerSearch.addEventListener('input', onPickerSearch);
    // clicking overlay outside content closes picker
    pickerOverlay.addEventListener('click', (ev)=> { if (ev.target === pickerOverlay) hidePicker(); });
  }

  function onPickerSearch(e){
    const active = pickerSidebar.querySelector('.picker-cat.active');
    const cat = active ? active.getAttribute('data-cat') : 'astral';
    renderPickerGrid(cat,'',1,cat,e.target.value || '');
  }

  function renderPickerGrid(side, trait, qty, category, q){
    category = (category || 'astral').toLowerCase();
    q = (q || '').toLowerCase();

    const keys = unitKeys.filter(k => {
      const u = unitDatabase[k];
      if (!u) return false;
      if ((u.rarity || '').toLowerCase() !== category) return false;
      if (q && !(u.name || '').toLowerCase().includes(q)) return false;
      return true;
    });

    if (!keys.length) { pickerGrid.innerHTML = ''; return; }

    pickerGrid.innerHTML = keys.map(k => {
      const u = unitDatabase[k];
      const p = u.unitId ? `url('${imageProvider}${u.unitId}')` : '';
      const rcls = (u.rarity || '').toLowerCase().replace(/\s+/g,'-');
      // NOTE: no dragging; clicking will add and auto-close
      return `<div class="picker-thumb rarity-${rcls}" data-key="${k}" title="${esc(u.name)}"><div class="img" style="background-image:${p}"></div></div>`;
    }).join('');

    // click handlers: add and close picker
    pickerGrid.querySelectorAll('.picker-thumb').forEach(t => {
      t.removeEventListener('click', onPickerClick);
      t.addEventListener('click', onPickerClick);
    });
  }

  function onPickerClick(e){
    const key = e.currentTarget.getAttribute('data-key');
    if (!key) return;
    showQtyModal(key);
  }

  function prettifyTrait(t){
    if(!t) return 'Base';
    // camelCase or snake_case -> Title Case
    return String(t).replace(/([A-Z])/g, ' $1').replace(/[_\-]/g,' ').replace(/^\s*/, '').replace(/\s+/g,' ').replace(/(^|\s)\S/g, l => l.toUpperCase());
  }

  function showQtyModal(unitKey){
    if(!unitKey || !unitDatabase[unitKey]) return;
    // ensure underlying picker is hidden so only this modal shows
    hidePicker();
    const u = unitDatabase[unitKey];
    // populate qty and trait options
    qtyInput.value = '1';
    traitList.innerHTML = '';
    const opts = ['base'];
    if (u.traits && typeof u.traits === 'object') opts.push(...Object.keys(u.traits));
    opts.forEach((tk, idx) => {
      const id = `trait_${Math.random().toString(36).slice(2,8)}`;
      const label = document.createElement('label');
      label.className = 'trait-label' + (idx===0 ? ' selected' : '');
      label.setAttribute('data-trait', tk);
      label.setAttribute('for', id);
      label.innerText = prettifyTrait(tk === 'base' ? 'Base' : tk);
      const radio = document.createElement('input');
      radio.type = 'radio'; radio.name = 'trait_radio'; radio.id = id; radio.value = tk; if(idx===0) radio.checked = true;
      radio.style.display = 'none';
      label.prepend(radio);
      label.addEventListener('click', ()=>{
        traitList.querySelectorAll('.trait-label').forEach(x => x.classList.remove('selected'));
        label.classList.add('selected');
        radio.checked = true;
      });
      traitList.appendChild(label);
    });

    // attach add handler (capture unitKey)
    qtyAddBtn.onclick = function(){
      const qty = Math.max(1, parseInt(qtyInput.value,10) || 1);
      const selected = traitList.querySelector('input[type="radio"]:checked');
      const traitKey = selected ? selected.value : 'base';
      const side = currentPickerSide || 'left';
      addToSide(side, unitKey, traitKey, qty);
      // keep calculator visible and hide main list/pagination
      calculatorRoot.style.display = 'block';
      listRoot.style.display = 'none';
      pagination.style.display = 'none';
      const topButtons = document.querySelector('.top-buttons');
      const sortRow = document.querySelector('.sort-row');
      if (topButtons) topButtons.style.display = 'none';
      if (sortRow) sortRow.style.display = 'none';
      if (goMainBtn) goMainBtn.style.display = 'inline-block';
      hideQtyModal();
    };

    qtyCloseBtn.onclick = hideQtyModal;
    qtyOverlay.addEventListener('click', function(ev){ if(ev.target === qtyOverlay) hideQtyModal(); });

    qtyOverlay.style.display = 'flex'; document.body.style.overflow = 'hidden';
  }

  function hideQtyModal(){ qtyOverlay.style.display = 'none'; document.body.style.overflow = ''; }

  function showPicker(){ pickerOverlay.style.display = 'flex'; document.body.style.overflow = 'hidden'; }
  function hidePicker(){ pickerOverlay.style.display = 'none'; document.body.style.overflow = ''; }

  // calculator rendering functions
  function calcThumbHTML(it){
    const u = unitDatabase[it.key] || {};
    const p = u.unitId ? `url('${imageProvider}${u.unitId}')` : '';
    const rcls = (u.rarity || '').toLowerCase().replace(/\s+/g,'-');
    const traitLabel = (it.trait && it.trait !== 'base') ? `<div class="trait-badge">${esc(prettifyTrait(it.trait))}</div>` : '';
    const qtyLabel = (it.qty && it.qty > 1) ? `<div class="qty-badge">x${it.qty}</div>` : '';
    return `<div class="calc-thumb rarity-${rcls}" data-id="${it.id}" title="${esc(u.name)}">`+
           `<div class="img" style="background-image:${p}"></div>`+
           `<div class="thumb-remove" data-id="${it.id}">×</div>`+
           `${traitLabel}${qtyLabel}`+
           `</div>`;
  }

  function renderThumbs(){
    leftItemsEl.innerHTML = leftItems.map(calcThumbHTML).join('');
    rightItemsEl.innerHTML = rightItems.map(calcThumbHTML).join('');
    // attach remove handlers
    document.querySelectorAll('.thumb-remove').forEach(btn=>{
      btn.removeEventListener('click', onThumbRemove);
      btn.addEventListener('click', onThumbRemove);
    });
  }

  function onThumbRemove(e){
    const id = e.currentTarget.getAttribute('data-id');
    let idx = leftItems.findIndex(x => x.id === id);
    if (idx >= 0) leftItems.splice(idx,1);
    idx = rightItems.findIndex(x => x.id === id);
    if (idx >= 0) rightItems.splice(idx,1);
    persistTrade();
    renderThumbs();
    updateTotalsAndVerdict();
  }

  function addToSide(side, key, trait, qty){
    if (!key || !unitDatabase[key]) return;
    qty = Math.max(1, Math.floor(qty) || 1);
    const u = unitDatabase[key];
    const single = (trait && trait !== 'base' && u.traits && u.traits[trait]) ? parseValue(u.traits[trait].value) : parseValue(u.baseStats.value);
    const item = { id: `${key}:${trait}:${Date.now()}:${Math.random().toString(36).slice(2,6)}`, key, trait, qty, single, computed: single * qty };
    if (side === 'left') leftItems.push(item); else rightItems.push(item);
    persistTrade();
    renderThumbs();
    updateTotalsAndVerdict();
  }

  function updateTotalsAndVerdict(){
    leftItems.forEach(i => i.computed = (i.single||0) * (i.qty||1));
    rightItems.forEach(i => i.computed = (i.single||0) * (i.qty||1));
    const leftSum = leftItems.reduce((s,i)=>s+Number(i.computed||0),0);
    const rightSum = rightItems.reduce((s,i)=>s+Number(i.computed||0),0);
    leftTotalEl.innerText = `TOTAL VALUE: ${abbr(leftSum)}`;
    rightTotalEl.innerText = `TOTAL VALUE: ${abbr(rightSum)}`;
    const FAIR = 0.02, SMALL = 0.10;
    let verdict = 'NO ITEMS';
    if (leftSum === 0 && rightSum === 0) verdict = 'NO ITEMS';
    else if (Math.abs(leftSum - rightSum) <= Math.max(1, FAIR * Math.max(leftSum, rightSum))) verdict = 'FAIR';
    else if (leftSum > rightSum) { if (rightSum === 0 || leftSum > rightSum * (1 + SMALL)) verdict = 'OVERPAYING'; else verdict = 'LOSE'; }
    else { if (leftSum === 0 || rightSum > leftSum * (1 + SMALL)) verdict = 'UNDERPAYING'; else verdict = 'WIN'; }
    const vtext = verdict.toUpperCase();
    verdictText.innerText = vtext;
    // color mapping
    const cmap = {
      'LOSE':'#ff1f1f', 'OVERPAYING':'#ff7a3a', 'UNDERPAYING':'#ff7a3a', 'WIN':'#22c55e', 'FAIR':'#a855f7', 'NO ITEMS':'#9ca3af'
    };
    verdictText.style.color = cmap[vtext] || '#9ca3af';
  }

  // persistence
  function persistTrade(){
    try {
      const payload = { left: leftItems.map(i => ({ key:i.key, trait:i.trait, qty:i.qty })), right: rightItems.map(i => ({ key:i.key, trait:i.trait, qty:i.qty })) };
      localStorage.setItem(LS_KEY, JSON.stringify(payload));
    } catch (err) { console.warn('persistTrade failed', err); }
  }
  function restoreTrade(){
    try {
      const raw = localStorage.getItem(LS_KEY);
      if (!raw) return;
      const parsed = JSON.parse(raw);
      if (parsed && parsed.left && parsed.right) {
        leftItems = parsed.left.map(it => {
          const single = (it.trait && it.trait !== 'base' && unitDatabase[it.key] && unitDatabase[it.key].traits && unitDatabase[it.key].traits[it.trait]) ? parseValue(unitDatabase[it.key].traits[it.trait].value) : parseValue((unitDatabase[it.key] && unitDatabase[it.key].baseStats && unitDatabase[it.key].baseStats.value) || 0);
          return { id: `${it.key}:${it.trait}:${Date.now()}:${Math.random().toString(36).slice(2,6)}`, key:it.key, trait:it.trait, qty: Math.max(1, it.qty||1), single, computed: single * Math.max(1, it.qty||1) };
        });
        rightItems = parsed.right.map(it => {
          const single = (it.trait && it.trait !== 'base' && unitDatabase[it.key] && unitDatabase[it.key].traits && unitDatabase[it.key].traits[it.trait]) ? parseValue(unitDatabase[it.key].traits[it.trait].value) : parseValue((unitDatabase[it.key] && unitDatabase[it.key].baseStats && unitDatabase[it.key].baseStats.value) || 0);
          return { id: `${it.key}:${it.trait}:${Date.now()}:${Math.random().toString(36).slice(2,6)}`, key:it.key, trait:it.trait, qty: Math.max(1, it.qty||1), single, computed: single * Math.max(1, it.qty||1) };
        });
      }
    } catch (err) { console.warn('restoreTrade failed', err); }
  }

  // top category button wiring (single row)
  catButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      catButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      const rval = btn.getAttribute('data-rarity') || 'all';
      if (rval === 'calculator') {
        // show calculator, hide list & pagination and hide top controls
        calculatorRoot.style.display = 'block';
        calculatorRoot.setAttribute('aria-hidden', 'false');
        listRoot.style.display = 'none';
        pagination.style.display = 'none';
        const topButtons = document.querySelector('.top-buttons');
        const sortRow = document.querySelector('.sort-row');
        if (topButtons) topButtons.style.display = 'none';
        if (sortRow) sortRow.style.display = 'none';
        const goMain = document.getElementById('go-main-btn'); if (goMain) goMain.style.display = 'inline-block';
      } else {
        // restore main view and show top controls
        calculatorRoot.style.display = 'none';
        calculatorRoot.setAttribute('aria-hidden', 'true');
        listRoot.style.display = '';
        pagination.style.display = 'flex';
        const topButtons = document.querySelector('.top-buttons');
        const sortRow = document.querySelector('.sort-row');
        if (topButtons) topButtons.style.display = '';
        if (sortRow) sortRow.style.display = '';
        const goMain = document.getElementById('go-main-btn'); if (goMain) goMain.style.display = 'none';
        currentFilter = rval;
        currentPage = 1;
        renderList();
      }
    });
  });

  // sort buttons
  sortBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      sortBtns.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentSort = btn.getAttribute('data-sort') || 'default';
      currentPage = 1; renderList();
    });
  });

  // pagination wiring
  prevBtn.addEventListener('click', ()=>{ if (currentPage>1){ currentPage--; renderList(); window.scrollTo({top:0,behavior:'smooth'}); } });
  nextBtn.addEventListener('click', ()=> {
    const keys = unitKeys.filter(k => {
      const u = unitDatabase[k];
      const r = (u.rarity || '').toLowerCase();
      if (currentFilter !== 'all' && r !== currentFilter) return false;
      if (searchQuery && !(u.name||'').toLowerCase().includes(searchQuery.toLowerCase())) return false;
      return true;
    });
    const maxPage = Math.ceil(keys.length / itemsPerPage) || 1;
    if (currentPage < maxPage) { currentPage++; renderList(); window.scrollTo({top:0,behavior:'smooth'}); }
  });

  // search bar
  document.getElementById('search-bar').addEventListener('input', (e)=>{ searchQuery = e.target.value || ''; currentPage = 1; renderList(); });

  // picker open buttons (open modal default to Astral)
  let currentPickerSide = 'left';
  plusLeft.addEventListener('click', ()=> { currentPickerSide = 'left'; createPicker(); showPicker(); });
  plusRight.addEventListener('click', ()=> { currentPickerSide = 'right'; createPicker(); showPicker(); });

  // go main page button behavior (also used to restore controls)
  if (goMainBtn) {
    goMainBtn.addEventListener('click', ()=>{
      // restore main list view
      calculatorRoot.style.display = 'none';
      calculatorRoot.setAttribute('aria-hidden', 'true');
      listRoot.style.display = '';
      pagination.style.display = 'flex';
      const topButtons = document.querySelector('.top-buttons');
      const sortRow = document.querySelector('.sort-row');
      if (topButtons) topButtons.style.display = '';
      if (sortRow) sortRow.style.display = '';
      // mark 'all' as active
      document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
      const allBtn = document.querySelector('.cat-btn[data-rarity="all"]'); if (allBtn) allBtn.classList.add('active');
      if (goMainBtn) goMainBtn.style.display = 'none';
    });
  }

  // phone & modal: ensure scrolling inside picker - we've set CSS max-height and overflow.

  // initialization
  try {
    restoreTrade();
    renderList();
    renderThumbs();
    updateTotalsAndVerdict();
  } catch (err) {
    showFatal('Initialization error: ' + (err && err.message ? err.message : String(err)));
  }

  // expose for debugging
  window._skibidi = { unitDatabase, leftItems, rightItems, renderList, renderThumbs, updateTotalsAndVerdict };

})();
